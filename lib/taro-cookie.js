!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var o=t();for(var r in o)("object"==typeof exports?exports:e)[r]=o[r]}}(self,(function(){return(()=>{"use strict";var e={328:e=>{var t={decodeValues:!0,map:!1,silent:!1};function o(e){return"string"==typeof e&&!!e.trim()}function r(e,r){var s=e.split(";").filter(o),i=s.shift().split("="),a=i.shift(),n=i.join("=");r=r?Object.assign({},t,r):t;try{n=r.decodeValues?decodeURIComponent(n):n}catch(e){console.error("set-cookie-parser encountered an error while decoding a cookie with value '"+n+"'. Set options.decodeValues to false to disable this feature.",e)}var l={name:a,value:n};return s.forEach((function(e){var t=e.split("="),o=t.shift().trimLeft().toLowerCase(),r=t.join("=");"expires"===o?l.expires=new Date(r):"max-age"===o?l.maxAge=parseInt(r,10):"secure"===o?l.secure=!0:"httponly"===o?l.httpOnly=!0:"samesite"===o?l.sameSite=r:l[o]=r})),l}function s(e,s){if(s=s?Object.assign({},t,s):t,!e)return s.map?{}:[];if(e.headers&&e.headers["set-cookie"])e=e.headers["set-cookie"];else if(e.headers){var i=e.headers[Object.keys(e.headers).find((function(e){return"set-cookie"===e.toLowerCase()}))];i||!e.headers.cookie||s.silent||console.warn("Warning: set-cookie-parser appears to have been called on a request object. It is designed to parse Set-Cookie headers from responses, not Cookie headers from requests. Set the option {silent: true} to suppress this warning."),e=i}return Array.isArray(e)||(e=[e]),(s=s?Object.assign({},t,s):t).map?e.filter(o).reduce((function(e,t){var o=r(t,s);return e[o.name]=o,e}),{}):e.filter(o).map((function(e){return r(e,s)}))}e.exports=s,e.exports.parse=s,e.exports.parseString=r,e.exports.splitCookiesString=function(e){if(Array.isArray(e))return e;if("string"!=typeof e)return[];var t,o,r,s,i,a=[],n=0;function l(){for(;n<e.length&&/\s/.test(e.charAt(n));)n+=1;return n<e.length}for(;n<e.length;){for(t=n,i=!1;l();)if(","===(o=e.charAt(n))){for(r=n,n+=1,l(),s=n;n<e.length&&"="!==(o=e.charAt(n))&&";"!==o&&","!==o;)n+=1;n<e.length&&"="===e.charAt(n)?(i=!0,n=s,a.push(e.substring(t,r)),t=n):n=r+1}else n+=1;(!i||n>=e.length)&&a.push(e.substring(t,e.length))}return a}}},t={};function o(r){var s=t[r];if(void 0!==s)return s.exports;var i=t[r]={exports:{}};return e[r](i,i.exports,o),i.exports}o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},o.d=(e,t)=>{for(var r in t)o.o(t,r)&&!o.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r={};return(()=>{o.r(r),o.d(r,{default:()=>a});var e=o(328),t=o.n(e);const s=new class{getCookieScopeDomain(e=""){if(!e)return[];let t=(e=e.replace(/^\.+/gi,"")).split(".").map((t=>[".",e.slice(e.indexOf(t))].join("")));return[e].concat(t)}normalizeDomain(e=""){return e.replace(/^(\.*)?(?=\S)/gi,".")}},i=class{constructor(e){this.name=e.name||"",this.value=e.value||"",this.domain=e.domain||"",this.path=e.path||"/",this.expires=e.expires?new Date(e.expires):null,this.maxAge=e.maxAge?parseInt(e.maxAge):null,this.httpOnly=!!e.httpOnly,this.dateTime=e.dateTime?new Date(e.dateTime):new Date}set(e=""){var o=t().parse(e,{decodeValues:!1})[0];return o&&(Object.assign(this,o),this.dateTime=new Date),this}merge(e){return Object.assign(this,e)}isExpired(){return 0===this.maxAge||(this.maxAge>0?(Date.now()-this.dateTime.getTime())/1e3>this.maxAge:!!(this.expires&&this.expires<new Date))}isPersistence(){return!this.maxAge||this.maxAge>0}isInDomain(e){return s.getCookieScopeDomain(e).indexOf(this.domain)>=0}isInPath(e){return 0===e.indexOf(this.path)||this.path.replace(/\/$/,"")===e}toString(){return[this.name,this.value].join("=")}},a=class{constructor({storage:e}){this.localStorage=e,this.__storageKey="__cookie_store__",this.__cookiesMap=this.__readFromStorage()||new Map}has(e,t,o){return void 0!==this.getCookie(e,t,o)}get(e="",t="",o="/"){let r=this.getCookie(e,t,o);return r?r.value:void 0}set(e="",t="",o={}){let r=o.domain;if(!r||!e)throw new Error("name 和 options.domain 值不正确！");let s=new i(Object.assign(o,{name:e,value:t})),a=this.__cookiesMap.get(r)||new Map;return a.set(e,s),this.__cookiesMap.set(r,a),this.__saveToStorage(),s}dir(){let e={};for(let t of this.__cookiesMap.keys())e[t]=this.getCookies(t);return e}remove(e="",t=""){if(t){let o=this.__cookiesMap.get(t);o&&o.delete(e),o=this.__cookiesMap.get(s.normalizeDomain(t)),o&&o.delete(e)}else for(let t of this.__cookiesMap.values())t.delete(e);return this.__saveToStorage(),!0}getCookie(e="",t="",o="/"){let r,i=s.getCookieScopeDomain(t);for(let[s,a]of this.__cookiesMap.entries())if(!(t&&i.indexOf(s)<0)){if(r=a.get(e),r&&r.isInPath(o)&&!r.isExpired())break;r=void 0}return r}getCookies(e,t){let o={};return this.getCookiesArray(e,t).forEach((e=>{o[e.name]=e.value})),o}getCookiesArray(e="",t="/"){let o=[],r=s.getCookieScopeDomain(e);for(let[s,i]of this.__cookiesMap.entries())if(!(e&&r.indexOf(s)<0))for(let e of i.values())e.isInPath(t)&&!e.isExpired()&&o.push(e);return o}setCookiesArray(e=[]){return this.__cookiesMap=this.__cookiesMap||new Map,e.forEach((e=>{let t=this.__cookiesMap.get(e.domain);t||(t=new Map,this.__cookiesMap.set(e.domain,t)),t.set(e.name,e)})),this.__saveToStorage(),this.__cookiesMap}clearCookies(e){if(e){let t=this.__cookiesMap.get(e);t&&t.clear()}else this.__cookiesMap.clear();return this.__saveToStorage(),!0}getRequestCookies(e,t){let o=this.getCookiesArray(e,t);return this.stringify(o)}setResponseCookies(e,t){let o=this.parse(e,t);return this.setCookiesArray(o)}parse(e="",o){return t().parse(t().splitCookiesString(e),{decodeValues:!1}).map((e=>(e.domain=s.normalizeDomain(e.domain)||o,new i(e))))}stringify(e){return e.map((e=>e.toString())).join("; ")}__saveToStorage(){try{let e=[];for(let t of this.__cookiesMap.values())for(let o of t.values())o.isExpired()?t.delete(o.name):o.isPersistence()&&e.push(o);this.localStorage.setItem(this.__storageKey,e)}catch(e){console.warn("Cookie 存储异常：",e)}}__readFromStorage(){try{let e=this.localStorage.getItem(this.__storageKey)||[];return e=e.map((e=>new i(e))),this.setCookiesArray(e)}catch(e){console.warn("Cookie 读取异常：",e)}}}})(),r})()}));